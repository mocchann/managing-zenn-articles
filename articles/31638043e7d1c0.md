---
title: "ドメイン駆動設計入門を読んでアプリを作ったので学んだことと考えをまとめた記事"
emoji: "🙆"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["DDD", "ドメイン駆動設計"]
published: false
---

## はじめに
DDDを学ぶために以下書籍を読み、簡単なアプリケーションを作ったので理解した内容をまとめておく

https://www.shoeisha.co.jp/book/detail/9784798150727

※あくまで自分の理解・認識をまとめたものなので、明らかに間違ってるってところがあればコメントをいただけると嬉しいです🙏

## ドメインとは
プログラムを使って問題を解決する領域のこと
例えば、会計システムの中で「消費税の計算」という問題を解決したいのであれば、消費税計算に関わる領域をドメインと呼ぶことになる

## ドメイン駆動設計とは
ドメインの知識に焦点を当てた設計手法のこと
開発者が利用者にとって役立つソフトウェアを開発するために価値のある知識を選んでいく必要がある

### 戦略的DDDとは
主にドメインに焦点を当てた設計手法
すべてドメインを中心に考えていく
トップダウンのDDD

### 戦術的DDDとは
値オブジェクトやエンティティなどを既存のリポジトリにどう組み込んで活用できるかを考えていく設計手法
ボトムアップのDDD
とっつきやすいがHowによりがちなので、本質であるドメイン ≠ 仕様を見失いがちなので注意が必要、いわゆる軽量DDDになりやすい

## 値オブジェクトとは
不変性を持ったオブジェクト
等価交換・比較が可能
ライフサイクルを持たない
1度作ったあとに値の変更は不可

## エンティティとは
ライフサイクルのあるオブジェクト
等価交換不可
一意性のあるオブジェクト
ユニークな識別子を持つ

## ドメインサービスとは
エンティティに持つと不自然な処理を書くドメインのためのサービス
あくまでエンティティに実装するのが不自然な処理がある場合にのみ、ドメインサービスを用いる
積極的には使わない→なんでもかんでもドメインサービスに処理を書いてしまう→ドメインモデル貧血症になりやすいので注意

## リポジトリとは
データストアへの永続化をドメインと責務分離するためのclass
interfaceを挟み依存性を逆転することでアプリケーションに柔軟性を持たせることができる

## アプリケーションサービスとは
いわゆるユースケース
executeなどただひとつの実行メソッドを持つ
リポジトリに依存し、ドメインオブジェクトをデータストアへ永続化する役割を担う

## ファクトリとは
複雑な処理等の責務を分離するためのclass

## コマンドオブジェクトとは
引数が数多くあるときに、修正箇所が増えてしまうためそれを解決するオブジェクト？
コマンドの責務をこのオブジェクトで吸収することにより、引数が更新されるときなどもコマンドオブジェクトにまとめられているのでこのオブジェクトをいじればよくなり保守性があがる

## 集約とは
データストアへの永続化の単位？
たとえば社員集約と、所属部署集約があるとすれば、それぞれ別々にデータストアへ永続化する
SQLのcascade deleteとかをイメージすると理解しやすいかも？

## 仕様とは
？？？
